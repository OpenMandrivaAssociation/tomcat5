
 http://svn.apache.org/viewvc?view=revision&revision=936540

diff -Naurp tomcat5-5.5.28/apache-tomcat-5.5.28-src/container/catalina/src/share/org/apache/catalina/authenticator/AuthenticatorBase.java tomcat5-5.5.28.oden/apache-tomcat-5.5.28-src/container/catalina/src/share/org/apache/catalina/authenticator/AuthenticatorBase.java
--- tomcat5-5.5.28/apache-tomcat-5.5.28-src/container/catalina/src/share/org/apache/catalina/authenticator/AuthenticatorBase.java	2009-07-24 19:36:47.000000000 +0000
+++ tomcat5-5.5.28.oden/apache-tomcat-5.5.28-src/container/catalina/src/share/org/apache/catalina/authenticator/AuthenticatorBase.java	2010-09-12 11:11:58.000000000 +0000
@@ -98,6 +98,11 @@ public abstract class AuthenticatorBase
 
 
     /**
+     * Default authentication realm name.
+     */
+    protected static final String REALM_NAME = "Authentication required";
+
+    /**
      * The message digest algorithm to be used when generating session
      * identifiers.  This must be an algorithm supported by the
      * <code>java.security.MessageDigest</code> class on your platform.
diff -Naurp tomcat5-5.5.28/apache-tomcat-5.5.28-src/container/catalina/src/share/org/apache/catalina/authenticator/BasicAuthenticator.java tomcat5-5.5.28.oden/apache-tomcat-5.5.28-src/container/catalina/src/share/org/apache/catalina/authenticator/BasicAuthenticator.java
--- tomcat5-5.5.28/apache-tomcat-5.5.28-src/container/catalina/src/share/org/apache/catalina/authenticator/BasicAuthenticator.java	2009-07-24 19:36:47.000000000 +0000
+++ tomcat5-5.5.28.oden/apache-tomcat-5.5.28-src/container/catalina/src/share/org/apache/catalina/authenticator/BasicAuthenticator.java	2010-09-12 11:11:58.000000000 +0000
@@ -194,9 +194,7 @@ public class BasicAuthenticator
         CharChunk authenticateCC = authenticate.getCharChunk();
         authenticateCC.append("Basic realm=\"");
         if (config.getRealmName() == null) {
-            authenticateCC.append(request.getServerName());
-            authenticateCC.append(':');
-            authenticateCC.append(Integer.toString(request.getServerPort()));
+            authenticateCC.append(REALM_NAME);
         } else {
             authenticateCC.append(config.getRealmName());
         }
diff -Naurp tomcat5-5.5.28/apache-tomcat-5.5.28-src/container/catalina/src/share/org/apache/catalina/authenticator/DigestAuthenticator.java tomcat5-5.5.28.oden/apache-tomcat-5.5.28-src/container/catalina/src/share/org/apache/catalina/authenticator/DigestAuthenticator.java
--- tomcat5-5.5.28/apache-tomcat-5.5.28-src/container/catalina/src/share/org/apache/catalina/authenticator/DigestAuthenticator.java	2009-07-24 19:36:47.000000000 +0000
+++ tomcat5-5.5.28.oden/apache-tomcat-5.5.28-src/container/catalina/src/share/org/apache/catalina/authenticator/DigestAuthenticator.java	2010-09-12 11:11:58.000000000 +0000
@@ -406,8 +406,7 @@ public class DigestAuthenticator
         // Get the realm name
         String realmName = config.getRealmName();
         if (realmName == null)
-            realmName = request.getServerName() + ":"
-                + request.getServerPort();
+            realmName = REALM_NAME;
 
         byte[] buffer = null;
         synchronized (md5Helper) {
